/* generated by Svelte v3.24.0 */
import {
	SvelteComponent,
	attr,
	detach,
	element,
	init,
	insert,
	noop,
	safe_not_equal,
	space
} from "svelte/internal";

function create_fragment(ctx) {
	let p0;
	let t1;
	let p1;
	let t3;
	let p2;
	let t9;
	let p3;
	let t11;
	let p4;
	let t13;
	let p5;
	let t15;
	let h20;
	let t17;
	let p6;
	let t19;
	let pre0;

	let raw0_value = `<code class="language-undefined">var ArcGIS = require(&#39;arcgis&#39;)
var arcgis = ArcGIS()</code>` + "";

	let t20;
	let p7;
	let t22;
	let pre1;

	let raw1_value = `<code class="language-undefined">var arcgis = Arcgis(&#123;
  token: namedUserToken
&#125;)</code>` + "";

	let t23;
	let p8;
	let t25;
	let pre2;

	let raw2_value = `<code class="language-undefined">var arcgis = Arcgis(&#123;
  domain: &#39;ago.my-server.com&#39;,
  token: namedUserToken
&#125;)</code>` + "";

	let t26;
	let p9;
	let t28;
	let pre3;

	let raw3_value = `<code class="language-undefined">function log (m) &#123;
  console.log(m)
&#125;
function ohNo (err) &#123;
  return new Error(err)
&#125;
arcgis.request()
.then(log)
.catch(ohNo)</code>` + "";

	let t29;
	let p10;
	let t31;
	let pre4;

	let raw4_value = `<code class="language-undefined">function log (err, results) &#123;
  if (err) &#123;
    return new Error(err)
  &#125; else &#123;
    console.log(results)
  &#125;
&#125;
arcgis.request(&#123;&#125;, log)</code>` + "";

	let t32;
	let p11;
	let t34;
	let p12;
	let t36;
	let pre5;

	let raw5_value = `<code class="language-undefined">function hello (user) &#123;
  console.log(&#39;Hello, &#39; + user.firstName)
&#125;
arcgis.user(&#39;NikolasWise&#39;).then(hello)</code>` + "";

	let t37;
	let p13;
	let t39;
	let pre6;

	let raw6_value = `<code class="language-undefined">function getContent (user) &#123;
  return user.content()
&#125;
function logContent (content) &#123;
  console.log(content)
&#125;
arcgis.user(&#39;NikolasWise&#39;)
.then(getContent)
.then(logContent)</code>` + "";

	let t40;
	let p14;
	let t42;
	let pre7;

	let raw7_value = `<code class="language-undefined">function logGroups (item) &#123;
  item.groups.forEach(function (group) &#123;
    console.log(group.title)
  &#125;)
&#125;
arcgis.user(&#39;NikolasWise&#39;).then(logGroups)</code>` + "";

	let t43;
	let p15;
	let t45;
	let pre8;

	let raw8_value = `<code class="language-undefined">function logOrg (org) &#123;
  console.log(org)
&#125;
arcgis.organization(&#39;esripdx&#39;).then(logOrg)</code>` + "";

	let t46;
	let p16;
	let t48;
	let pre9;

	let raw9_value = `<code class="language-undefined">function getMembers (org) &#123;
  return org.members()
&#125;
function log (members) &#123;
  console.log(members)
&#125;
arcgis.organization().then(getMembers).then(log)</code>` + "";

	let t49;
	let p17;
	let t53;
	let pre10;

	let raw10_value = `<code class="language-undefined">function getContent (org) &#123;
  return org.content()
&#125;
function log (items) &#123;
  console.log(items)
&#125;
arcgis.organization().then(getContent).then(log)</code>` + "";

	let t54;
	let p18;
	let t56;
	let h21;
	let t58;
	let p19;
	let t60;
	let pre11;

	let raw11_value = `<code class="language-undefined">var layerID = &#39;a5e5e5ac3cfc44dfa8e90b92cd7289fb&#39;
function logItem (item) &#123;
  console.log(item)
&#125;
arcgis.item(layerID).then(logItem)</code>` + "";

	let t61;
	let p20;
	let t63;
	let pre12;

	let raw12_value = `<code class="language-undefined">var layerId = &#39;a5e5e5ac3cfc44dfa8e90b92cd7289fb&#39;
function updateItem (item) &#123;
  return item.update(&#123;
    snippet: &#39;Building footprints in my neighborhood in Portland, Oregon&#39;
  &#125;)
&#125;
function shareItem (item) &#123;
  console.log(item)
  return item.permissions(&#123;
    access: &#39;public&#39;
  &#125;)
&#125;
arcgis.item(layerId)
.then(updateItem)
.then(shareItem)</code>` + "";

	let t64;
	let p21;
	let t66;
	let pre13;

	let raw13_value = `<code class="language-undefined">var layerID = &#39;a5e5e5ac3cfc44dfa8e90b92cd7289fb&#39;
function getData (item) &#123;
  return item.data()
&#125;
function logData (data) &#123;
  console.log(data)
&#125;
arcgis.item(layerId)
.then(getData)
.then(logData)</code>` + "";

	let t67;
	let p22;

	return {
		c() {
			p0 = element("p");
			p0.textContent = "This year I built a JavaScript wrapper for Node and the Browser around the ArcGIS REST API to simplify working with that platform as a developer. This was as an exercise in API design, as well as making a tool that I wanted to use but didn’t exist yet. The project is a bare-bones library to ease interactions with the ArcGIS REST API in JavaScript and Node apps.";
			t1 = space();
			p1 = element("p");
			p1.textContent = "Sometimes – and for sure in this case – an API can be rough, built over time, and not provide the sort of logical models that work well with specific language environments. This was the case with the ArcGIS REST API that I was running in to. A lot of the decisions had been made over the course of years, and didn’t translate very smoothly a language as young as Node.js.";
			t3 = space();
			p2 = element("p");
			p2.innerHTML = `The first step was to figure out what problems I wanted to solve. A lot of my work with Esri PDX has been about content handling, and so this is where I started. Reading <em>all</em> the doc to get a big picture of what’s going on with the API, and talk to everyone who’s done work like this before to figure out what problems <em>they</em> needed to solve was the first step. From there I felt I had enough context and information to make the thing useful for more people than just me, and make sure that it was coherent with the underlying goals of the original API.`;
			t9 = space();
			p3 = element("p");
			p3.textContent = "This project works to simplify and unify the gap between the ArcGIS REST API and a contemporary Node application. This library is a UI in the most basic sense of the term — it provides an interface between the developer and the servers. That interface needs to be well designed and thoughtful in order to make the process as smooth, intuitive, and pleasurable as possible.";
			t11 = space();
			p4 = element("p");
			p4.textContent = "One of the most important parts of the project is to provide developers with a way to access the ArcGIS platform without needing to architect their entire application around opinionated frameworks (like Dojo, for example). Though the library itself is written in ES6, it’s distributed as plain, normal ES5 – both as a node package and a packaged bundle. This means it works both in Node and the browser, and has very few opinions on how it integrates with the rest of your app.";
			t13 = space();
			p5 = element("p");
			p5.textContent = "Right now, the library wraps most of the basic platform content management and interactions - getting and editing users, organizations, and items. The Node ArcGIS Client Library is an open source project — so it’s scope will increase as the community works to accomplish more goals and workflows.";
			t15 = space();
			h20 = element("h2");
			h20.textContent = "Setting up the client";
			t17 = space();
			p6 = element("p");
			p6.textContent = "The first step in using the library is initializing the client with your target portal.";
			t19 = space();
			pre0 = element("pre");
			t20 = space();
			p7 = element("p");
			p7.textContent = "This sets up a default object for interacting with the API. This default is going to talk to ArcGIS Online as an anonymous, unauthenticated user. One can authenticate this client session as a named user by passing in a user token obtained from a successful OAuth login process.";
			t22 = space();
			pre1 = element("pre");
			t23 = space();
			p8 = element("p");
			p8.textContent = "This isn’t exclusive to ArcGIS Online. The API for interacting with your organization’s installation of Portal or Server is the same. Setting up the client session with your instance is done by specifying your API domain.";
			t25 = space();
			pre2 = element("pre");
			t26 = space();
			p9 = element("p");
			p9.textContent = "Beyond the initialization of the client, the library is exclusively async. All the functions return promises by default.";
			t28 = space();
			pre3 = element("pre");
			t29 = space();
			p10 = element("p");
			p10.textContent = "You can also pass in a node-style callback, if you’d prefer.";
			t31 = space();
			pre4 = element("pre");
			t32 = space();
			p11 = element("p");
			p11.textContent = "Both methods work just as well, and use all the same business logic. I like promises, but maybe you don’t. This is one of the main reasons the library does its best to avoid inflicting my opinions on your codebase.";
			t34 = space();
			p12 = element("p");
			p12.textContent = "Once we have an authenticated session, we can do all sorts of stuff — like figure out who we are:";
			t36 = space();
			pre5 = element("pre");
			t37 = space();
			p13 = element("p");
			p13.textContent = "We can get all of the items that user has in the platform:";
			t39 = space();
			pre6 = element("pre");
			t40 = space();
			p14 = element("p");
			p14.textContent = "Or a list of all the groups that a user is a member of.";
			t42 = space();
			pre7 = element("pre");
			t43 = space();
			p15 = element("p");
			p15.textContent = "The library also can interact with the user’s organization, returning information, members, or all the content associated with the organization.";
			t45 = space();
			pre8 = element("pre");
			t46 = space();
			p16 = element("p");
			p16.textContent = "The organization call defaults to ‘self’ — whatever organization the current user is a member of.";
			t48 = space();
			pre9 = element("pre");
			t49 = space();
			p17 = element("p");
			p17.innerHTML = `Many of the content calls are abstractions or helper methods for longer, more complicated calls to the <code>search</code> endpoint.`;
			t53 = space();
			pre10 = element("pre");
			t54 = space();
			p18 = element("p");
			p18.textContent = "In this way we are able to create a transitional layer between the API itself (a super complicated call to the search endpoint) and what application developers need (all my organization’s content).";
			t56 = space();
			h21 = element("h2");
			h21.textContent = "Working with content";
			t58 = space();
			p19 = element("p");
			p19.textContent = "Platform content is the weakest link in the library as of today. ArcGIS supports a huge range of item types, and quite a number of sophisticated things you can do with those item types. For now the basics are more or less in place — like getting an item’s details:";
			t60 = space();
			pre11 = element("pre");
			t61 = space();
			p20 = element("p");
			p20.textContent = "Or updating the those details and editing the permissions:";
			t63 = space();
			pre12 = element("pre");
			t64 = space();
			p21 = element("p");
			p21.textContent = "So far, there’s some support for item-type-specific methods that are starting to open up the possibilities of manipulating your content from Node — like getting all the data in a layer.";
			t66 = space();
			pre13 = element("pre");
			t67 = space();
			p22 = element("p");
			p22.textContent = "There is a lot more of the platform that we could cover than this - services, analysis, layer creation and tile publishing all are actions that this library or ones like it could cover.";
			attr(pre0, "class", "language-undefined");
			attr(pre1, "class", "language-undefined");
			attr(pre2, "class", "language-undefined");
			attr(pre3, "class", "language-undefined");
			attr(pre4, "class", "language-undefined");
			attr(pre5, "class", "language-undefined");
			attr(pre6, "class", "language-undefined");
			attr(pre7, "class", "language-undefined");
			attr(pre8, "class", "language-undefined");
			attr(pre9, "class", "language-undefined");
			attr(pre10, "class", "language-undefined");
			attr(pre11, "class", "language-undefined");
			attr(pre12, "class", "language-undefined");
			attr(pre13, "class", "language-undefined");
		},
		m(target, anchor) {
			insert(target, p0, anchor);
			insert(target, t1, anchor);
			insert(target, p1, anchor);
			insert(target, t3, anchor);
			insert(target, p2, anchor);
			insert(target, t9, anchor);
			insert(target, p3, anchor);
			insert(target, t11, anchor);
			insert(target, p4, anchor);
			insert(target, t13, anchor);
			insert(target, p5, anchor);
			insert(target, t15, anchor);
			insert(target, h20, anchor);
			insert(target, t17, anchor);
			insert(target, p6, anchor);
			insert(target, t19, anchor);
			insert(target, pre0, anchor);
			pre0.innerHTML = raw0_value;
			insert(target, t20, anchor);
			insert(target, p7, anchor);
			insert(target, t22, anchor);
			insert(target, pre1, anchor);
			pre1.innerHTML = raw1_value;
			insert(target, t23, anchor);
			insert(target, p8, anchor);
			insert(target, t25, anchor);
			insert(target, pre2, anchor);
			pre2.innerHTML = raw2_value;
			insert(target, t26, anchor);
			insert(target, p9, anchor);
			insert(target, t28, anchor);
			insert(target, pre3, anchor);
			pre3.innerHTML = raw3_value;
			insert(target, t29, anchor);
			insert(target, p10, anchor);
			insert(target, t31, anchor);
			insert(target, pre4, anchor);
			pre4.innerHTML = raw4_value;
			insert(target, t32, anchor);
			insert(target, p11, anchor);
			insert(target, t34, anchor);
			insert(target, p12, anchor);
			insert(target, t36, anchor);
			insert(target, pre5, anchor);
			pre5.innerHTML = raw5_value;
			insert(target, t37, anchor);
			insert(target, p13, anchor);
			insert(target, t39, anchor);
			insert(target, pre6, anchor);
			pre6.innerHTML = raw6_value;
			insert(target, t40, anchor);
			insert(target, p14, anchor);
			insert(target, t42, anchor);
			insert(target, pre7, anchor);
			pre7.innerHTML = raw7_value;
			insert(target, t43, anchor);
			insert(target, p15, anchor);
			insert(target, t45, anchor);
			insert(target, pre8, anchor);
			pre8.innerHTML = raw8_value;
			insert(target, t46, anchor);
			insert(target, p16, anchor);
			insert(target, t48, anchor);
			insert(target, pre9, anchor);
			pre9.innerHTML = raw9_value;
			insert(target, t49, anchor);
			insert(target, p17, anchor);
			insert(target, t53, anchor);
			insert(target, pre10, anchor);
			pre10.innerHTML = raw10_value;
			insert(target, t54, anchor);
			insert(target, p18, anchor);
			insert(target, t56, anchor);
			insert(target, h21, anchor);
			insert(target, t58, anchor);
			insert(target, p19, anchor);
			insert(target, t60, anchor);
			insert(target, pre11, anchor);
			pre11.innerHTML = raw11_value;
			insert(target, t61, anchor);
			insert(target, p20, anchor);
			insert(target, t63, anchor);
			insert(target, pre12, anchor);
			pre12.innerHTML = raw12_value;
			insert(target, t64, anchor);
			insert(target, p21, anchor);
			insert(target, t66, anchor);
			insert(target, pre13, anchor);
			pre13.innerHTML = raw13_value;
			insert(target, t67, anchor);
			insert(target, p22, anchor);
		},
		p: noop,
		i: noop,
		o: noop,
		d(detaching) {
			if (detaching) detach(p0);
			if (detaching) detach(t1);
			if (detaching) detach(p1);
			if (detaching) detach(t3);
			if (detaching) detach(p2);
			if (detaching) detach(t9);
			if (detaching) detach(p3);
			if (detaching) detach(t11);
			if (detaching) detach(p4);
			if (detaching) detach(t13);
			if (detaching) detach(p5);
			if (detaching) detach(t15);
			if (detaching) detach(h20);
			if (detaching) detach(t17);
			if (detaching) detach(p6);
			if (detaching) detach(t19);
			if (detaching) detach(pre0);
			if (detaching) detach(t20);
			if (detaching) detach(p7);
			if (detaching) detach(t22);
			if (detaching) detach(pre1);
			if (detaching) detach(t23);
			if (detaching) detach(p8);
			if (detaching) detach(t25);
			if (detaching) detach(pre2);
			if (detaching) detach(t26);
			if (detaching) detach(p9);
			if (detaching) detach(t28);
			if (detaching) detach(pre3);
			if (detaching) detach(t29);
			if (detaching) detach(p10);
			if (detaching) detach(t31);
			if (detaching) detach(pre4);
			if (detaching) detach(t32);
			if (detaching) detach(p11);
			if (detaching) detach(t34);
			if (detaching) detach(p12);
			if (detaching) detach(t36);
			if (detaching) detach(pre5);
			if (detaching) detach(t37);
			if (detaching) detach(p13);
			if (detaching) detach(t39);
			if (detaching) detach(pre6);
			if (detaching) detach(t40);
			if (detaching) detach(p14);
			if (detaching) detach(t42);
			if (detaching) detach(pre7);
			if (detaching) detach(t43);
			if (detaching) detach(p15);
			if (detaching) detach(t45);
			if (detaching) detach(pre8);
			if (detaching) detach(t46);
			if (detaching) detach(p16);
			if (detaching) detach(t48);
			if (detaching) detach(pre9);
			if (detaching) detach(t49);
			if (detaching) detach(p17);
			if (detaching) detach(t53);
			if (detaching) detach(pre10);
			if (detaching) detach(t54);
			if (detaching) detach(p18);
			if (detaching) detach(t56);
			if (detaching) detach(h21);
			if (detaching) detach(t58);
			if (detaching) detach(p19);
			if (detaching) detach(t60);
			if (detaching) detach(pre11);
			if (detaching) detach(t61);
			if (detaching) detach(p20);
			if (detaching) detach(t63);
			if (detaching) detach(pre12);
			if (detaching) detach(t64);
			if (detaching) detach(p21);
			if (detaching) detach(t66);
			if (detaching) detach(pre13);
			if (detaching) detach(t67);
			if (detaching) detach(p22);
		}
	};
}

const metadata = {
	"title": "Building a Client Library for ArcGIS",
	"slug": "building-a-client-library",
	"date": "2015.3.09",
	"description": "Writing a wrapper client library to smooth out design weirdness at the API level leads to plenty of design thinking on the way things should be.",
	"type": "text, texts"
};

const { title, slug, date, description, type } = metadata;

class Component extends SvelteComponent {
	constructor(options) {
		super();
		init(this, options, null, create_fragment, safe_not_equal, {});
	}
}

export default Component;
export { metadata };